# Security Policy

## Reporting a Vulnerability

このプロジェクトのセキュリティを維持するため、脆弱性を発見した場合は適切に報告してください。

### 報告方法

セキュリティ上の脆弱性を発見した場合は、**公開のIssueではなく**、以下の方法で報告してください：

1. **GitHub Security Advisory**: 推奨方法
   - このリポジトリの "Security" タブから "Report a vulnerability" を選択
   - 非公開で報告でき、修正まで情報が保護されます

2. **直接連絡**: 緊急の場合
   - GitHubのプライベートメッセージで @nahisaho に連絡

### 報告に含めるべき情報

以下の情報を含めると、迅速な対応が可能になります：

- 脆弱性の種類（例: SQLインジェクション、XSS、認証バイパスなど）
- 影響を受けるファイルとコード行
- 脆弱性を再現する手順
- 概念実証コード（PoC）がある場合
- 潜在的な影響の評価
- 修正案（あれば）

### 対応プロセス

1. **受領確認**: 48時間以内に報告を確認します
2. **調査**: 脆弱性の検証と影響範囲の調査（1週間以内）
3. **修正**: パッチの開発とテスト
4. **公開**: 修正後、適切なタイミングで公開します
5. **クレジット**: 報告者の承認を得た上で、謝辞を記載します

### サポート対象バージョン

| Version | Supported          |
| ------- | ------------------ |
| main    | :white_check_mark: |
| < main  | :x:                |

現在、mainブランチのみをサポートしています。

### セキュリティベストプラクティス

このプロジェクトを使用する際は、以下のベストプラクティスに従ってください：

#### 本番環境での使用

1. **環境変数の管理**
   - `.env`ファイルを本番環境に配置しない
   - 環境変数管理システム（AWS Secrets Manager、Azure Key Vaultなど）を使用

2. **認証情報**
   - デフォルトのクライアントID/シークレットを変更
   - 強力なパスワードポリシーを適用
   - 定期的にクレデンシャルをローテーション

3. **データベース**
   - PostgreSQLの認証を有効化
   - 最小権限の原則を適用
   - SSL/TLS接続を使用

4. **OAuth 2.0**
   - 本番用のOAuthプロバイダーを使用
   - トークンの有効期限を適切に設定
   - スコープを最小限に制限

5. **ネットワーク**
   - HTTPS/TLS 1.2+を必須化
   - ファイアウォールでAPIアクセスを制限
   - レート制限を有効化

6. **ロギングとモニタリング**
   - セキュリティイベントをログ記録
   - 異常なアクセスパターンを監視
   - 定期的なセキュリティ監査

#### 開発環境

1. **依存関係**
   - 定期的に`npm audit`、`pip-audit`、または`mvn dependency:check`を実行
   - 脆弱性が報告されたパッケージを更新

2. **コード品質**
   - 静的解析ツール（ESLint、Pylint、SonarQubeなど）を使用
   - コードレビューを実施
   - セキュリティテストを自動化

3. **機密情報**
   - クレデンシャルをコードにハードコードしない
   - `.gitignore`で`.env`ファイルを除外
   - コミット前に機密情報をスキャン

### 既知の制限事項

このプロジェクトは**リファレンス実装**であり、以下の点に注意してください：

- デモ用のOAuth実装は本番環境には不十分です
- データベースの暗号化は実装されていません
- レート制限は基本的なものです
- 監査ログは最小限です

本番環境では、これらの機能を強化してください。

### 責任ある情報開示

セキュリティ研究者の皆様へ：

- 脆弱性の調査は責任を持って行ってください
- 公開前に修正の機会を提供してください（90日の猶予期間を推奨）
- 他のユーザーのデータにアクセスしないでください
- サービスの可用性を妨げないでください

### 連絡先

質問や懸念事項がある場合は、[GitHub Issues](https://github.com/nahisaho/oneroster-gradebook-reference/issues)（セキュリティ以外の問題）または Security Advisory（セキュリティ問題）を通じて連絡してください。

---

**セキュリティは継続的なプロセスです。皆様のご協力に感謝します。**
